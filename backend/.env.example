# MachineMate Backend Environment Configuration
# Copy this file to .env and fill in your actual values

# ============================================================================
# Database Configuration (Supabase Postgres)
# ============================================================================
# Get connection string from Supabase:
# Project Settings > Database > Connection string > URI (use "Connection pooling" for production)
# Format: postgresql://postgres.xxxxx:[password]@aws-0-region.pooler.supabase.com:6543/postgres
DATABASE_URL=postgresql://postgres:[YOUR-PASSWORD]@db.xxxxx.supabase.co:5432/postgres

# Alternative for connection pooling (recommended for serverless):
# DATABASE_URL=postgresql://postgres.xxxxx:[password]@aws-0-region.pooler.supabase.com:6543/postgres?pgbouncer=true

# ============================================================================
# Supabase JWT Configuration
# ============================================================================
# These are needed to validate JWTs from the mobile app
# Get from: Project Settings > API > JWT Settings

# JWT audience (usually "authenticated")
SUPABASE_JWT_AUDIENCE=authenticated

# JWT issuer URL
# Format: https://your-project-ref.supabase.co/auth/v1
SUPABASE_JWT_ISSUER=https://your-project-ref.supabase.co/auth/v1

# JWKS URL for validating JWT signatures
# Format: https://your-project-ref.supabase.co/auth/v1/keys
SUPABASE_JWT_JWKS_URL=https://your-project-ref.supabase.co/auth/v1/keys

# Supabase service role key (SENSITIVE - server-side only, bypasses RLS)
# Get from: Project Settings > API > service_role key
# WARNING: Never expose this to the client!
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.your-service-role-key-here

# ============================================================================
# AI/ML Configuration
# ============================================================================
# Fireworks AI API key for machine identification
# Get from: https://fireworks.ai/api-keys
FIREWORKS_API_KEY=fw_your_api_key_here

# Optional: Override default VLM settings
# MACHINEMATE_VLM_API_BASE_URL=https://api.fireworks.ai/inference/v1
# MACHINEMATE_VLM_MODEL=accounts/fireworks/models/firellava-13b
# MACHINEMATE_ENABLE_MOCK_RESPONSES=false

# ============================================================================
# Media & Storage Configuration
# ============================================================================
# Public base URL for media assets (Supabase Storage or CDN)
# Supabase: https://your-project-ref.supabase.co/storage/v1/object/public/
# Custom CDN: https://cdn.yourdomain.com/
MEDIA_PUBLIC_BASE_URL=https://your-project-ref.supabase.co/storage/v1/object/public/

# Supabase storage bucket names
STORAGE_BUCKET_MACHINES=machines
STORAGE_BUCKET_TUTORIALS=tutorials
STORAGE_BUCKET_USER_UPLOADS=user-uploads

# ============================================================================
# Observability Configuration
# ============================================================================
# Sentry DSN for backend error tracking (optional)
SENTRY_DSN=https://your-backend-sentry-dsn@sentry.io/your-project-id

# Sentry environment
SENTRY_ENVIRONMENT=development

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Structured logging format: json | console
LOG_FORMAT=console

# ============================================================================
# API Configuration
# ============================================================================
# Allowed CORS origins (comma-separated)
CORS_ORIGINS=http://localhost:8081,exp://localhost:8081

# API rate limiting (requests per minute)
# RATE_LIMIT_PER_MINUTE=60

# ============================================================================
# Security Configuration
# ============================================================================
# JWT token expiration (in seconds)
# JWT_EXPIRATION=3600

# Enable/disable auth requirement for endpoints
# REQUIRE_AUTH=true

# ============================================================================
# Development/Testing
# ============================================================================
# Environment: development | staging | production
ENVIRONMENT=development

# Enable debug mode (more verbose logging, etc.)
# DEBUG=true

# Mock external API responses for testing
# MOCK_FIREWORKS=false
